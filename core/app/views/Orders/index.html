#{extends 'main_full.html'/}
#{set title:'Orders'/}
#{set 'moreScripts'}
    #{script 'orders/orders.coffee'/}
#{/set}

<div class="row-fluid">
    <div class="span5 offset2">
        <form id="search_form">
            <div class="row-fluid">
                <div class="span12">
                    <select id="o_market" name="p.market">
                        <option value="">Market(ALL)</option>
                    #{list items:models.market.M.values()}
                        <option value="${_.name()}">${_}</option>
                    #{/list}
                    </select>
                    <select id="o_acc" name="p.account.id">
                        <option value="">Account</option>
                    #{list items:accs}
                        <option value="${_.id}">${_.prettyName()}</option>
                    #{/list}
                    </select>
                    <select id="o_state" name="p.state">
                        <option value="all">State(ALL)</option>
                    #{list items:models.market.Orderr.S.values()}
                        <option value="${_}">${_}</option>
                    #{/list}
                    </select>
                </div>
            </div>
            <div class="row-fluid">
                <div class="input-prepend span6">
                    <span class="add-on">From:</span>
                    <input type="date" id="o_from" name="p.from">
                </div>

                <div class="input-prepend span6">
                    <span class="add-on">To:</span>
                    <input type="date" id="o_to" name="p.to">
                </div>
            </div>
            <div class="row-fluid">
                <div class="input-prepend span6">
                    <span class="add-on">OrderBy:</span>
                    <select name="p.orderBy" class="span4">
                    #{list items:models.view.post.OrderPOST.P.values(), as:'p'}
                        <option value="${p}">${p}</option>
                    #{/list}
                    </select>
                    <select name="p.desc" class="span4">
                        <option value="DESC">DESC</option>
                        <option value="ASC">ASC</option>
                    </select>
                </div>
                <div class="input-prepend span6">
                    <span class="add-on">Search:</span>
                    <input type="text" id="o_search" name="p.search" placeholder="关键字搜索; +2 销售数量大于 2;">
                </div>
            </div>
        </form>
    </div>
    <div class="span4" id="search_btns">
        <div class="btn-group">
            <a href="#" day="1" class="btn btn-info" placement="bottom" rel="popover" data-content="按照设置搜索条件搜索 1 天内的订单(结果缓存5mn)">1
                Day</a>
            <a href="#" day="7" class="btn btn-info" placement="bottom" rel="popover" data-content="按照设置搜索条件搜索 7 天内的订单(结果缓存5mn)">7
                Day</a>
            <a href="#" day="30" class="btn btn-info" placement="bottom" rel="popover" data-content="按照设置搜索条件搜索 30 天内的订单(结果缓存5mn)">30
                Day</a>
            <a href="#" day="-1" class="btn btn-info" placement="bottom" rel="popover" data-content="按照设置搜索条件搜索自定义(<b>From</b>, <b>TO</b>)天数内的订单(结果缓存5mn)">Range?</a>
        </div>
        <h3>Search Buttons</h3>
    </div>
</div>
<hr>

<div class="row-fluid" id="order_list">
    <div class="span12">
    #{if orders.size() == 0}
        暂时还没有订单
    #{/if}
    #{else }
        <table class="table table-condensed table-bordered">
            #{render 'Orders/_order_table_tr.html', pi:pi/}
            <tr class="tb_footer">
                <td colspan="10">
                    #{bootstrap_pager pi:pi, url:'/orders/index'/}
                </td>
            </tr>
        </table>
    #{/else}
    </div>
</div>
