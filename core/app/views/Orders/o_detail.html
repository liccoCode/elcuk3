#{extends 'main.html'/}
#{set title:'Orders'/}
#{set 'moreScripts'}
#{/set}

#{if ord == null}
读取的 Order 不存在!
#{/if}
#{else }
<div class="row">
    <div class="span12"><span class="label label-success">Order Basic</span></div>
    <div class="span12">
        <table class="table table-bordered">
            <tr>
                <td>OrderId:</td>
                <td>${ord.orderId}</td>
                <td>Address:</td>
                <td>${ord.address}</td>
                <td>Address1:</td>
                <td>${ord.address1}</td>
                <td>Reciver:</td>
                <td>${ord.reciver}</td>
            </tr>
            <tr>
                <td>ArriveDate:</td>
                <td>${ord.arriveDate}</td>
                <td>Buyer:</td>
                <td>${ord.buyer}</td>
                <td>City:</td>
                <td>${ord.city}</td>
                <td>Country:</td>
                <td>${ord.country}</td>
            </tr>
            <tr>
                <td>CreateDate:</td>
                <td>${ord.createDate}</td>
                <td>Email:</td>
                <td>${ord.email}</td>
                <td>Market:</td>
                <td>${ord.market.toString()}</td>
                <td>PaymentDate:</td>
                <td>${ord.paymentDate}</td>
            </tr>
            <tr>
                <td>Phone:</td>
                <td>${ord.phone}</td>
                <td>PostalCode:</td>
                <td>${ord.postalCode}</td>
                <td>Province:</td>
                <td>${ord.province}</td>
                <td colspan="2">&nbsp;</td>
            </tr>
            <tr>
                <td>ShipDate:</td>
                <td>${ord.shipDate}</td>
                <td>ShipLevel:</td>
                <td>${ord.shipLevel}</td>
                <td>ShippingAmount:</td>
                <td>${ord.shippingAmount}</td>
                <td>ShippingService:</td>
                <td>${ord.shippingService}</td>
            </tr>
            <tr>
                <td>State:</td>
                #{if ord.state == models.market.Orderr.S.PENDING}
                    <td style="color:#4169e1;">${ord.state}</td>
                #{/if}
                #{elseif ord.state == models.market.Orderr.S.PAYMENT}
                    <td style="color:orange;">${ord.state}</td>
                #{/elseif}
                #{elseif ord.state == models.market.Orderr.S.SHIPPED}
                    <td style="color:green;">${ord.state}</td>
                #{/elseif}
                #{elseif ord.state.ordinal() >= models.market.Orderr.S.SHIPPED.ordinal()}
                    <td style="color:red;">${ord.state}</td>
                #{/elseif}
                #{else }
                    <td>${ord.state}</td>
                #{/else}
                <td>TotalAmount:</td>
                <td>${ord.totalAmount}</td>
                <td>TrackNo:</td>
                <td>${ord.trackNo}</td>
                <td>UserId:</td>
                <td>${ord.userid}</td>
            </tr>
            <tr>
                <td>Memo</td>
                <td colspan="7">${ord.memo}</td>
            </tr>
        </table>
    </div>

    <div class="span12"><span class="label label-success">Order Items</span></div>
    <div class="span12">
        <table class="table table-bordered">
            <tr>
                <th>SKU</th>
                <th>Id</th>
                <th>Qty</th>
                <th>Price/GBP</th>
                <th>ShipPrice</th>
                <th>ProductName</th>
                <th>CreateDate</th>
                <th>Memo</th>
            </tr>
            #{list items:ord.items, as:'item'}
                <tr>
                    <td>${item.id}</td>
                    <td>${item.quantity}</td>
                    <td>${item.price}</td>
                    <td>${item.shippingPrice}</td>
                    <td><a target="_blank" href="${helper.Webs.link(item.selling)}">${item.productName}</a></td>
                    <td>${item.createDate}</td>
                    <td>${item.memo}</td>
                    <td>${item.product.sku}</td>
                </tr>
            #{/list}
        </table>
    </div>

    <div class="span12"><span class="label label-success">Order Feedback</span></div>
    <div class="span12">
        <table class="table">
            <tr>
                <td>${m}</td>
            </tr>
        </table>
    </div>

    <div class="span12"><span class="label label-success">Order Fees</span></div>
    <div class="span12">
        <table class="table table-bordered">
            <tr>
                <th>Cost</th>
                <th>Cost(USD)</th>
                <th>Date</th>
                <th>FeeType</th>
                <th>Qty</th>
            </tr>
            #{list items:ord.fees, as:'f'}
                <tr>
                    <td>${f.cost} ${f.currency.name()}</td>
                    <td>${f.usdCost.format('#.###')} USD</td>
                    <td>${f.date.format('yyyy-MM-dd')}</td>
                    <td>${f.type.name}</td>
                    <td>${f.qty}</td>
                </tr>
            #{/list}
        </table>
    </div>
</div>
#{/else}

