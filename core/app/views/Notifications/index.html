#{extends 'main.html'/}

#{info_row title:"Notifications (最新 80 条)"/}

#{form @Notifications.updateState(), class:'search_form', id:'Notifications_form'}
<div class="row-fluid">
  <div class="span12">
    <div class="input-prepend input-append inline">
      <button class="btn btn-primary" data-loading>已查阅</button>
    </div>
  </div>
</div>

<div class="row">
  <div class="span12">
    <table class="table table-bordered table-condensed">
      <tr>
        <th></th>
        <th>#</th>
        <th>标题</th>
        <th>内容</th>
        <th>创建时间</th>
        <th>通知时间</th>
      </tr>
        #{list items:notifications, as:'note'}
          <tr>
            <td>
              <label>
                  #{if note.state.label() == '未查看'}
                    <input type="checkbox" name="noteIDs" value="${note.id}">
                  #{/if}
              </label>
            </td>
            <td>${note.id}</td>
            <td>${note.title}</td>
            <td>${note.content}</td>
            <td>#{time_tooltip time:note.createAt, datetime:true/}</td>
            <td>#{time_tooltip time:note.notifyAt, datetime:true/}</td>
          </tr>
        #{/list}
    </table>
  </div>
</div>
#{/form}