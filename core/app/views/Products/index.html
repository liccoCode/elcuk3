#{extends 'main_full.html' /}
#{set title:'Product' /}
#{set 'moreScripts'}
    #{script 'component/pagination.coffee'/}
    #{script 'products/copysku.coffee'/}
#{/set}

<div style="margin:5px 0 0;" class="row">
#{flash_alert /}
#{errorMsgs /}
</div>

<div class="row-fluid">
  <form action="#" method="post" class="search_form">
    <div class="span12">
      <select name="p.state" class="span1 inline">
      #{list items:['Active', 'Inactive'], as:'s'}
        <option ${s == p.state ? 'selected' : ''} value="${s}">${s}</option>
      #{/list}
      </select>
      <div class="input-prepend input-append inline">
        <span class="add-on"><i class="icon-search"></i></span>
        <input type="hidden" name="p.page" value="${p.page}">
        <input type="text" autocomplete="off" data-provide="typeahead" data-items="5" data-source="${families}"
               name="p.search" value="${p.search}" style="width:172px;" placeHolder="搜索 SKU、附加属性、条码">
        <a href="javascript:void(0)" data-href="@{Products.index()}" class="btn btn-primary" id="searchBtn"
           data-loading>搜索</a>
      </div>
      <div class="inline">
        <a href="javascript:void(0)" data-href="@{Excels.exportProductDetailToExcel()}" class="btn btn-primary"
           target="_blank" id="downloadBtn" content="按照搜索条件导出 Product 基本信息到 Excel" placement='bottom' rel="popover">
          <i class="icon-download-alt"></i>下载 Excel
        </a>
      #{power.ck "products.edit"}
        <a href="@{Products.blank()}" class="btn btn-success" target="_blank">添加新产品</a>
      #{/power.ck}
      </div>
    </div>
  </form>
</div>

<div id="prod_list">
#{render 'Products/_products.html', prods:prods, pi:p,products:products,families:families/}
</div>
#{records records:records, row:true/}
