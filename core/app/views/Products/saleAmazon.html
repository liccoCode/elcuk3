#{extends 'main_full.html'/}
#{set 'moreStyles'}
    #{stylesheet 'market.css'/}
#{/set}
#{set 'moreScripts'}
    #{script 'component/amazon.coffee'/}
    #{script 'products/saleAmazon.coffee'/}
#{/set}
<div id='check_modal' class="modal hide fade">
  <div class="modal-header">
    <h3>使用 <span id="upc_num"></span> 上架的 Selling</h3>
  </div>
  <div class="modal-body">
    <p class="text-error">当前 SKU 为: ${product.sku}</p>

    <div class="innder-modal"></div>
  </div>
  <div class="modal-footer">
    <a href="#" id='check_cancel' data-dismiss='modal' class="btn">取消</a>
    <a href="#" id="check_apply" class="btn btn-primary">应用</a>
  </div>
  <blockquote class="template">
    <p class='check_title'></p>
    <small class='check_id'></small>
  </blockquote>
</div>

<<<<<<< HEAD
<form id='saleAmazonForm' action="@{Products.saleAmazonListing()}" method="post" autocomplete="off">
<table class="table table-condensed">
<tr>
  <td colspan="4">
    <a href="@{Products.show()}/${pro.sku}" class="btn btn-success">回退</a>
    <button class="btn btn-danger" data-confirm='确认上架?' data-disable-with='上架中...'>
      上架销售
    </button>
    <input type="hidden" name="s.state" value="${s.state.name()}">
  </td>
</tr>

<tr>
  <th>Title:</th>
  <td colspan="3">
    <textarea rows="2" name="s.aps.title" class="span12">${pro.productName}</textarea>
  </td>
</tr>

<tr>
  <th>MSKU:</th>
  <td>
    <input type="text" id="msku" name="s.merchantSKU" readonly="" value="${pro.sku}">
    <input type="hidden" id="sku" name="pro.sku" value="${pro.sku}">
  </td>
  <th>Acc:</th>
  <td>
    <select name="s.account.id" id="account">
      <option value="0">账号</option>
    #{list items:accs, as:'acc'}
      <option ${acc == s.account ? 'selected' : ''} value="${acc.id}">${acc.prettyName()}</option>
    #{/list}
    </select>
  </td>
</tr>

<tr>
  <th>UPC:</th>
  <td>
    <div class="input-append">
      <input type="text" class="span2" name="s.aps.upc" value="${s.aps.upc}">
      <button id='check_upc' class="btn btn-warning">@</button>
    </div>
  </td>
  <th>Condition/Market:</th>
  <td>
    <div class="input-append input-prepend">
      <input type="text" readonly="" name="s.aps.condition_" value="NEW" class="span1">
    #{pickMarkets id:'market', class:'span2', name:'s.market', m:s.market, blank:true/}
    </div>
  </td>
</tr>

<tr>
  <th>Manufac:</th>
  <td><input type="text" name="s.aps.manufacturer" value="EasyAcc"></td>
  <th>PartNumber:</th>
  <td>
    <input type="text" name="s.aps.manufacturerPartNumber" value="${s.aps.manufacturerPartNumber}">
  </td>
</tr>

<tr>
  <th>RBN:</th>
  <td>
    <div class="input-prepend">
      <input type="text" style="width:80px;" name="s.aps.rbns" value="${s.aps.rbns[0]}">
      <input type="text" style="width:80px;" name="s.aps.rbns" value="${s.aps.rbns[1]}">
    </div>
  </td>
  <th>Qty:</th>
  <td><input type="text" name="s.aps.quantity" value="0"></td>
</tr>

<tr>
  <th>Price:</th>
  <td>
    <div class="input-prepend">
      <span class="currency add-on">&pound;</span>
      <input type="text" class="span2" name="s.aps.standerPrice" placeHolder="Ex:19.99" value="${s.aps.standerPrice}">
    </div>
  </td>
  <th>SalePrice:</th>
  <td>
    <div class="input-prepend">
      <div class="input-prepend">
        <span class="currency add-on">&pound;</span>
        <input type="text" class="span2" name="s.aps.salePrice" placeHolder="Ex:15.99" value="${s.aps.salePrice}">
      </div>
    </div>
  </td>
</tr>

<tr>
  <th>StartDate</th>
  <td>
    <input type="text" name="s.aps.startDate" value="${new java.util.Date().format("yyyy-MM-dd")}">
  </td>
  <th>EndDate</th>
  <td><input type="text" name="s.aps.endDate" value="2015-01-01"></td>
</tr>

<tr>
  <th>Gift Options</th>
  <td >
    <label class="checkbox inline">
      <input name="s.aps.isGiftWrap" type="checkbox" ${s.aps.isGiftWrap ? 'checked':''} value="true">
      Gift&nbsp;Wrap
    </label>
    <label class="checkbox inline">
      <input name="s.aps.isGiftMessage" type="checkbox" ${s.aps.isGiftMessage ? 'checked':''} value="true">
      Gift&nbsp;Message
    </label>
  </td>
  <th>Feed Product Type:</th>
  <td>
      <div class="input-append input-prepend">
            <select class="span2" name="s.aps.feedProductType">
                <option value="ComputerComponent" selected>ComputerComponent</option>
                <option value="ComputerDriveOrStorage">ComputerDriveOrStorage</option>
                <option value="Monitor">Monitor</option>
                <option value="NotebookComputer">NotebookComputer</option>
                <option value="PersonalComputer">PersonalComputer</option>
                <option value="Printer">Printer</option>
                <option value="Scanner">Scanner</option>
                <option value="VideoProjector">VideoProjector</option>
            </select>
      </div>
  </td>
</tr>

<tr>
  <td colspan="4">
    <div class="input-prepend input-append offset1" id="sellingPreview">
      <button id="sid_preview" class="btn">
        <i class="icon-search"></i>
      </button>
      <input type="text" data-provide="typeahead" data-items="4" data-source="${sids}" placeHolder="同 Product SID">
      <button class="btn">填充</button>
    </div>
  </td>
</tr>

<tr>
  <th rowspan="5">Technical:</th>
  <td colspan="3">
    <div class="input-append">
      <input type="text" class="span11 bulletPoint" data-length='2000' name="s.aps.keyFeturess"
             value="${s.aps.keyFeturess[0]}">
      <span class="add-on"></span>
    </div>
  </td>
</tr>

<tr>
  <td colspan="3">
    <div class="input-append">
      <input type="text" class="span11 bulletPoint" data-length='2000' name="s.aps.keyFeturess"
             value="${s.aps.keyFeturess[1]}">
      <span class="add-on"></span>
    </div>
  </td>
</tr>

<tr>
  <td colspan="3">
    <div class="input-append">
      <input type="text" class="span11 bulletPoint" data-length='2000' name="s.aps.keyFeturess"
             value="${s.aps.keyFeturess[2]}">
      <span class="add-on"></span>
    </div>
  </td>
</tr>

<tr>
  <td colspan="3">
    <div class="input-append">
      <input type="text" class="span11 bulletPoint" data-length='2000' name="s.aps.keyFeturess"
             value="${s.aps.keyFeturess[3]}">
      <span class="add-on"></span>
=======
<div class="row-fluid">
  <div class="btn-toolbar" id="btns">
    <div class="btn-group">
      <button class="btn btn-success" id="submitSale" data-disable-with='提交请求中...'>提交 Feed 创建 Selling</button>
>>>>>>> wyatt/market
    </div>
  </div>

#{form @Products.saleAmazonListing(), class: 'form-horizontal', id: 'saleAmazonForm'}
  <div class="span10">
      #{text_field id:'title', name: 's.aps.title', label: '标题', value: '' /}
  </div>
  <div class="span5">
      #{text_field id:'msku', name: 's.merchantSKU', readonly: true, label: 'Merchant SKU', value: product.sku/}
      #{text_field id:'upc', name: 's.aps.upc', label: 'UPC', value: '' /}
      #{text_field id:'manufacturer', name: 's.aps.manufacturer', label: 'Manufacturer', value: 'EasyAcc' /}
      #{text_field id:'brand', name: 's.aps.brand', label: '品牌', value: 'EasyAcc'/}
      #{text_field id:'standerPrice', name: 's.aps.standerPrice', label: '标准价格', value: '' /}
      #{text_field id:'startDate', name: 's.aps.startDate', label: '优惠价格开始日期',  value: '2013-12-01' /}
      #{text_field id:'RBN', name: 's.aps.rbns[]', label: 'Recommanded Browser Nodes', value: '' /}

      #{checkbox_wrap id:'giftwrap', label: '附加选项'}
        <label class="checkbox">
          <input type="checkbox" id='giftwrap' checked name="s.aps.isGiftWrap" value="true">
          GiftWrap
        </label>
      #{/checkbox_wrap}
  </div>
  <div class="span5">
      #{select_field id:'account', name: 's.account.id', label: '上架账户', items: accs /}
      #{select_field id:'market', name: 's.market', label:'市场', items: models.market.M.values() /}
      #{text_field id:'partNumber', name: 's.aps.manufacturerPartNumber', label: 'Part Number', value: '' /}
      #{text_field id:'qty', name: 's.aps.quantity', label: '库存', readonly: true, value: '0' /}
      #{text_field id:'salePrice', name: 's.aps.salePrice', label: '优化销售价格(DE 没有)', value: '' /}
      #{text_field id:'endDate', name: 's.aps.endDate', label: '优惠价格截止日期', value: '2018-01-01' /}
      #{text_field id:'fnSku', name: 's.fnSku', label: 'FBA 的 FNSKU', value: s.fnSku /}
  </div>

  <div class="span10">
      #{text_field id:'bulletPoint1', name: 's.aps.keyFeturess[0]', label: 'BulletPoint 1~5',  value: ''/}
      #{text_field id:'bulletPoint2', name: 's.aps.keyFeturess[1]', label: '', value: '' /}
      #{text_field id:'bulletPoint3', name: 's.aps.keyFeturess[2]', label: '', value: ''/}
      #{text_field id:'bulletPoint4', name: 's.aps.keyFeturess[3]', label: '', value: ''/}
      #{text_field id:'bulletPoint5', name: 's.aps.keyFeturess[4]', label: '', value: ''/}

      #{text_field id:'searchTerms1', name: 's.aps.searchTermss[0]', label: 'SearchTerms 1~5', value: ''/}
      #{text_field id:'searchTerms2', name: 's.aps.searchTermss[1]', label: '', value: ''/}
      #{text_field id:'searchTerms3', name: 's.aps.searchTermss[2]', label: '', value: ''/}
      #{text_field id:'searchTerms4', name: 's.aps.searchTermss[3]', label: '', value: ''/}
      #{text_field id:'searchTerms5', name: 's.aps.searchTermss[4]', label: '', value: ''/}

      #{textarea_field id:'productDesc', name: 's.aps.productDesc', rows: 10, label: '产品详细描述', value: '' /}
  </div>
  <div class="offset1 span9" id="previewDesc"></div>
#{/form}
</div>


<script type="text/template" id="tsp-show-template">
  <h3>Product Desc</h3>

  <p><%= tsp['p'][0] %></p>

  <h3>Technical</h3>

  <p><%= tsp['t'].join('<br>') %></p>

  <h3>Search Terms</h3>

  <p><%= tsp['s'].join('<br>') %></p>

  <p>点击关闭, 点击 "放大镜" 重复查看</p>
</script>
