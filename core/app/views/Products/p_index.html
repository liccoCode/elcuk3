#{extends 'main.html' /}
#{set title:'Product' /}
#{set 'moreScripts'}
    #{script 'products/product.js'/}
#{/set}

<div class="row" style="margin:10px 0;">
    <div class="span12">
        <!-- BTN-1-BEGIN -->
        <a class="btn btn-primary" data-toggle="modal" href="#add_modal" id="add_prod">添加</a>

        <div id="add_modal" class="modal hide fade">
            <div class="modal-header">
                <a class="close" data-dismiss="modal">×</a>

                <h3>添加 Product</h3>
            </div>
            <div class="modal-body">
                <form id='add_prod_form' class="form-horizontal">
                    <fieldset>
                        <div class="control-group">
                            <label class="control-label" for="p.sku">SKU</label>

                            <div class="controls">
                                <input type="text" id="p.sku" name="p.sku">
                            </div>
                        </div>

                        <div class="control-group">
                            <label class="control-label" for="p.productName">ProductName</label>

                            <div class="controls">
                                <input type="text" id="p.productName" name="p.productName">
                            </div>
                        </div>

                        <div class="control-group">
                            <label class="control-label" for="p.lengths">Length</label>

                            <div class="controls">
                                <input type="text" id="p.lengths" name="p.lengths">
                            </div>
                        </div>

                        <div class="control-group">
                            <label class="control-label" for="p.heigh">Heigh</label>

                            <div class="controls">
                                <input type="text" id="p.heigh" name="p.heigh">
                            </div>
                        </div>

                        <div class="control-group">
                            <label class="control-label" for="p.width">Width</label>

                            <div class="controls">
                                <input type="text" id="p.width" name="p.width">
                            </div>
                        </div>

                        <div class="control-group">
                            <label class="control-label" for="p.weight">Weight</label>

                            <div class="controls">
                                <input type="text" id="p.weight" name="p.weight">
                            </div>
                        </div>

                        <div class="control-group">
                            <label class="control-label">Category</label>

                            <div class="controls">
                            #{if cates.size() == 0}
                                <input type="text" name="p.nocat" value="请添加 Category" readonly>
                            #{/if}
                            #{else }
                                #{select name:'p.category.categoryId', items:cates, labelProperty:'toString', valueProperty:'categoryId'}#{/select}
                            #{/else}
                            </div>
                        </div>
                    </fieldset>
                </form>
            </div>

            <div class="modal-footer">
                <a href="#" class="btn btn-primary" id="addProdPostBtn">Save</a>
                <a href="#" class="btn" data-dismiss="modal">Close</a>
            </div>
        </div>
        <!-- BTN-1-END -->
    </div>
</div>


<div class="row">
    <div class="span12">
    #{if prods.size() == 0}
        等待添加新产品
    #{/if}
    #{else }
        <table class="table table-striped">
            <tr>
                <th>SKU</th>
                <th>Name</th>
                <th>L</th>
                <th>H</th>
                <th>W</th>
                <th>Wt</th>
            </tr>
            #{list items:prods, as:'prod'}
                <tr data-toggle="collapse" data-target="#prod_details_${prod.sku}">
                    <td class="span2"><a target="_blank" href="@{Products.p_detail(prod.sku)}">${prod.sku}</a></td>
                    <td class="span6">${prod.productName}</td>
                    <td>${prod.lengths == null ? 0 : prod.lengths}</td>
                    <td>${prod.heigh == null ? 0 : prod.heigh}</td>
                    <td>${prod.width == null ? 0 : prod.width}</td>
                    <td>${prod.weight == null ? 0 : prod.weight}</td>
                </tr>
            #{/list}
            <tr>
                <td colspan="7">
                    #{bootstrap_pager c:pi.count, p:pi.page, s:pi.size, u:'/products/p_index'/}
                </td>
            </tr>
        </table>
    #{/else}
    </div>
</div>
