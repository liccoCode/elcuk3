#{if prods.size() == 0}
<p class="muted text-center">等待添加新产品.</p>
#{/if}
#{else }
<table class="table table-condensed table-bordered">
  <tr>
    <th>SKU</th>
    <th>操作</th>
    <th>Pics</th>
    <th>Name</th>
    <th>L(包材)</th>
    <th>H(包材)</th>
    <th>W(包材)</th>
    <th>Wt(包材)</th>
  </tr>
    #{list items:prods, as:'prod'}
      <tr data-toggle="collapse" data-target="#prod_details_${prod.sku}">

        <td><a target="_blank" href="@{Products.show(prod.sku)}">${prod.sku}</a></td>
          #{set count:prod.pictureCount() /}
        <td style="length:30px"><a href="javascript:void(0);" id="copyBtn" class="btn btn-mini btn-info">
          <i class="icon-refresh"></i>同步</a>
          <a href="javascript:void(0);" id="backupBtn" class="btn btn-mini btn-info">
            复制</a></td>


        <td>${count} <i class="${count > 0 ? 'icon-picture' : 'icon-exclamation-sign'}"></i>
        </td>
        <td>${prod.productName}</td>
        <td>${prod.lengths == null ? 0 : prod.lengths}</td>
        <td>${prod.heigh == null ? 0 : prod.heigh}</td>
        <td>${prod.width == null ? 0 : prod.width}</td>
        <td>${prod.weight == null ? 0 : prod.weight}</td>
      </tr>
    #{/list}
    #{if pi}
      <tr>
        <td colspan="7">
            #{bootstrap_pager pi:pi, url:'/products/index'/}
        </td>
      </tr>
    #{/if}
</table>
#{/else}








<div id="copy_modal" class="modal hide fade">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3>同步SKU</h3>
  </div>
  <div class="modal-body">
  #{form @Products.copy(), id:'update_form'}
    <dl class="dl-horizontal">

      <input type="hidden" id="target_choseid" name="choseid" value="3333">

      <dt>选择SKU</dt>
      <dd>
        <input type="text" autocomplete="off" data-provide="typeahead" data-items="5" data-source="${products}"
               name="skuid" value="" style="width:172px;" placeHolder="搜索 SKU">
      </dd>

      <dt>选择同步的信息:</dt>
      <dd>
        <label class="checkbox">
          <input type="checkbox" name="base" value="1" checked>
          <a>基本属性</a>
        </label>
        <label class="checkbox">
          <input type="checkbox" name="extend" value="1" checked>
          <a>扩展属性</a>
        </label>
        <label class="checkbox">
          <input type="checkbox" name="attach" value="1" checked>
          <a>附件</a>
        </label>
      </dd>
    </dl>


    <div class="modal-footer">
      <button class="btn" data-dismiss="modal" aria-hidden="true">关闭</button>
      <button class="btn btn-primary">同步</button>
    </div>
  #{/form}
  </div>

</div>


<div id="backup_modal" class="modal hide fade">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3>复制SKU</h3>
  </div>
  <div class="modal-body">
  #{form @Products.backup(), id:'update_form'}
    <input type="hidden" id="backup_choseid" name="choseid" value="0">

    <tr>
      <th>Family</th>
      <td>
        <input style="width:140px" type="text" name="family" data-provide="typeahead" data-source="${families}"
               value="" autocomplete="off">
      </td>
      <th>SKU</th>
      <td><input style="width:140px" type="text" name="sku" value="" autocomplete="off"></td>

    </tr>
    <dl class="dl-horizontal">

      <dt>选择复制的信息:</dt>
      <dd>
        <label class="checkbox">
          <input disabled="true" type="checkbox" name="base" value="1" checked>
          <a>基本属性</a>
        </label>
        <label class="checkbox">
          <input type="checkbox" name="extend" value="1" checked>
          <a>扩展属性</a>
        </label>
        <label class="checkbox">
          <input type="checkbox" name="attach" value="1" checked>
          <a>附件</a>
        </label>
      </dd>
    </dl>


    <div class="modal-footer">
      <button class="btn" data-dismiss="modal" aria-hidden="true">关闭</button>
      <button class="btn btn-primary">复制</button>
    </div>
  #{/form}
  </div>

</div>
