#{extends 'main_full.html'/}
#{set title:'FeeTypes'/}
#{set 'moreStyles'}
    #{stylesheet_cdn name:'feetypes.css'/}
#{/set}
#{set 'moreScripts'}
    #{script_cdn name: 'feetypes.coffee'/}
#{/set}

#{info_row }
<div style="text-align:center">
  <h3>请只使用两级</h3>
</div>
#{/info_row}

<div class="btn-toolbar">
  <button class="btn btn-success" data-toggle="toggle" data-target="#add_form">
    <i class="icon-plus-sign-alt"></i>
    新添加 FeeType
  </button>
</div>

<div class="row-fluid" id="add_form">
  <form method="post" action="@{FeeTypes.create()}">
    <label>费用名称</label>
    <input type="text" name="ft.name">
    <label>NickName</label>
    <input type="text" name="ft.nickName">
    <label>费用解释</label>
    <input type="text" name="ft.memo">
    <label>父费用类型</label>
    <select name="parentName">
      <option value="">TOP</option>
    #{list items:types, as:'parent'}
      <option value="${parent.name}">${parent.name}:${parent.memo}</option>
    #{/list}
    </select>
    <label></label>
    <button class="btn btn-primary">创建</button>
  </form>
</div>

<div class="row-fluid">
  <table class="table table-bordered table-condensed types">
    <tr>
      <th>Name</th>
      <th>NickName</th>
      <th>解释</th>
      <th>创建时间</th>
      <th>更新时间</th>
    </tr>
  #{list items:types, as:'top'}
    <tr>
      <td>${top.name}</td>
      <td>
        <input type="text" name="nickName" value="${top.nickName}">
      </td>
      <td>
        <input type="text" value="${top.memo}">
        <button class="btn btn-primary submit">更新</button>
        <button class="btn btn-danger delete">删除</button>
      </td>
      <td>${top.createdAt.los()}</td>
      <td>${top.updateAt.los()}</td>
    </tr>
      #{list items:top.children, as:'sub'}
        <tr class="level_1">
          <td><i class="icon-double-angle-right"></i>${sub.name}</td>
          <td><input type="text" name="nickName" value="${sub.nickName}"></td>
          <td>
            <input type="text" value="${sub.memo}">
            <button class="btn btn-primary submit">更新</button>
            <button class="btn btn-danger delete">删除</button>
          </td>
          <td>${sub.createdAt.los()}</td>
          <td>${sub.updateAt.los()}</td>
        </tr>
      #{/list}
  #{/list}
  </table>
</div>