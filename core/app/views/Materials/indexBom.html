#{extends 'main_full.html' /}
#{set title:"包装组列表"  /}
#{set 'moreScripts'}
    #{script 'component/pagination.coffee'/}
#{/set}
<style>
  .table td{
    vertical-align:middle;
  }
</style>
#{errorMsgs /}
#{flash_alert /}

<div class="row-fluid">
  <form action="@{Materials.index()}" method="get" class="search_form" id="search_Form">
    <div class="row-fluid">
      <div class="span12">
        <select name="p.type" class="inline">
          <option value="">物料类别</option>
        #{list items:models.material.MaterialBom.S, as:'t'}
          <option #{if p.status==t} selected #{/if} value="${t.name()}">${t.label()}</option>
        #{/list}
        </select>

        <div class="input-prepend input-append inline">
          <span class="add-on"><i class="icon-search"></i></span>
          <input type="text" style="width:220px;" name="p.search" placeholder="收货入库单ID or SKU or 采购计划ID" value="${p.search}">
          <input type="hidden" name="p.page" value="${p.page}">
          <button class="btn btn-primary" data-loading>搜索</button>
        </div>

        <a class="btn btn-success" href="@{controllers.Materials.blankBom()}" id="printBtn" target="_blank">
          <i class="icon-shopping-cart"></i> 新增包装BOM</a>
      </div>
    </div>
  </form>

  <form method="post" id="inboundForm">
    <div class="row-fluid">
      <div class="span12">
        <table class="table table-condensed table-bordered" id="data-table">
          <tr>
            <th>包装组编号</th>
            <th>名称</th>
            <th>PM</th>
            <th>状态</th>
            <th>更新时间</th>
            <th>操作</th>
          </tr>
        #{list items:boms, as:'m'}
          <tr>
            <td>${m.number}</td>
            <td>${m.name}</td>
            <td>${m.creator?.username}</td>
            <td>
              <select>
                #{list items:models.material.MaterialBom.S, as:'s'}
                  <option value="${s.name()}">${s.label()}</option>
                #{/list}
              </select>
            </td>
            <td>#{time_tooltip time:m.updateDate/}</td>
            <td>

            </td>
          </tr>
        #{/list}
          <tr>
            <td colspan="10">
            #{if boms.size() == 0}
              暂时还没有物料信息
            #{/if}
            #{else }
                #{bootstrap_pager pi:p, url:'' /}
            #{/else}
            </td>
          </tr>
        </table>
      </div>
    </div>
  </form>
</div>


