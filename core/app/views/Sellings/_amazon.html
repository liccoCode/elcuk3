<div class="row-fluid">
#{if s.state == models.market.Selling.S.DOWN}
  <div class="alert alert-error">
    <p style="text-align:center;">Selling ${s.sellingId} 已经不在 Amazon 中存在了, 系统中已经标记为 DOWN, 不再允许向
      Amazon 发送请求
    </p>
  </div>
#{/if}
#{else }
  <div class="btn-toolbar" id='btns'>
    <div class="btn-group">
      <button class="btn btn-warning" id="amz-update" data-url="@{Sellings.update()}"
              content="直接更新到数据库" placement='bottom' rel="popover" title="Local Update Button">
        Update
      </button>
      <button class="btn btn-warning" id="amz-deploy" data-url="@{Sellings.deploy(s.sellingId)}"
              content="从数据库中加载最新保存的内容向 Amazon 提交更新" placement='bottom' rel="popover" title="Sync To Amazon Button">
        Deploy
      </button>
      <button class="btn btn-warning" id="amz-sync"
              content="从 Amazon 同步回来更新到数据库" placement='bottom' rel="popover" title="Sync From Amazon Button">
        Sync
      </button>
    </div>
    <div class="btn-group">
      <a class="btn btn-success" href="@{Listings.listing(s.listing.listingId)}">Listing : ${s.listing.listingId}</a>
      <a class="btn btn-success" href="@{Products.show()}/${s.merchantSKU.split(",")[0]}">Product
        : ${s.merchantSKU.split(",")[0]}</a>
      <a class="btn btn-success" href="${s.showListingLink()}" target="_blank">Amazon : ${s.asin}</a>
    </div>

    <div class="btn-group">
        #{power.ck "sellings.delete"}
          <a href="javascript:;" class="btn btn-danger" action='remove'
             data-url='@{Sellings.destroy(s.sellingId)}'>删除 Selling</a>
          </td>
        #{/power.ck}
    </div>
  </div>
#{/else}
</div>

<div class="row-fluid">
  <div class="span11">
    <ul class="thumbnails" id="images" sku='${s.merchantSKU.split(",")[0]}'></ul>
    <div class="input-prepend span12">
      <button id="img_cal" placement='right' class="btn" rel="popover" title="Image Check Button"
              content="图片按照 0~8 设置好编号以后,点击此按钮预览生成的值.">
        <i class="icon-eye-open"></i>
      </button>
      <input type="text" class="span10" name="s.aps.imageName" readonly value="${s.aps.imageName}">

    </div>
  </div>

#{form @Sellings.selling(s.sellingId), class: 'form-horizontal', id: 'saleAmazonForm'}
  <div class="span10">
      #{textarea_field id:'title', name: 's.aps.title', rows: 3, label: '标题', value: s.aps.title /}
  </div>
  <div class="span5">
    <input type="hidden" name="s.sellingId" value="${s.sellingId}">
    <input type="hidden" name="s.aps.imageName" value="${s.aps.imageName}">
      #{text_field id:'msku', name: 's.merchantSKU', readonly: true, label: 'Merchant SKU', value: s.merchantSKU/}
      #{text_field id:'upc', name: 's.aps.upc', readonly: true, label: 'UPC', value: s.aps.upc /}
      #{text_field id:'manufacturer', name: 's.aps.manufacturer', label: 'Manufacturer', value: s.aps.manufacturer /}
      #{text_field id:'brand', name: 's.aps.brand', label: '品牌', value: s.aps.brand/}
      #{text_field id:'standerPrice', name: 's.aps.standerPrice', label: '标准价格', value: s.aps.standerPrice /}
      #{text_field id:'startDate', name: 's.aps.startDate', label: '优惠价格开始日期', value: s.aps.startDate?.format('yyyy-MM-dd') /}
      #{text_field id:'RBN', name: 's.aps.rbns[]', label: 'Recommanded Browser Nodes', value: s.aps.rbns[0] /}
      #{text_field id:'itemType', name: 's.aps.itemType', label: 'ItemType',
      value: '' /}
      #{checkbox_wrap id:'giftwrap', label: '附加选项'}
        <label class="checkbox">
          <input type="checkbox" id='giftwrap' ${s.aps.isGiftWrap?'checked':''} name="s.aps.isGiftWrap" value="true">
          GiftWrap
        </label>
      #{/checkbox_wrap}
      #{text_field id:'state', readonly: true, label: '系统内状态', value: s.state.name() /}
  </div>
  <div class="span5">
      #{text_field id:'account', disabled: true, label: '上架账户', value: s.account.prettyName() /}
      #{hidden_field id: 'accountId', name: 's.account.id', value: s.account.id /}
      #{text_field id:'market', name: 's.market', readonly: true, label:'市场', value: s.market.name() /}
      #{select_field id: 'templateType', name: 's.aps.templateType', label: '模板类型', items: ['Computers',
  'ConsumerElectronics', 'Wireless', 'HomeImprovement', 'Home', 'Games', 'Sports', 'Lighting'], value: s.aps.templateType/}
      #{select_field id:'feedProductType', name: 's.aps.feedProductType', label: 'Feed Product Type', items:[s.aps.feedProductType], value: s.aps.feedProductType /}
      #{text_field id:'salePrice', name: 's.aps.salePrice', label: '优惠销售价格',value: s.aps.salePrice /}
      #{text_field id:'endDate', name: 's.aps.endDate', label: '优惠价格截止日期', value: s.aps.endDate?.format('yyyy-MM-dd') /}
      #{text_field id:'partNumber', name: 's.aps.manufacturerPartNumber', label: 'Part Number', value: s.aps.manufacturerPartNumber /}
      #{text_field id:'qty', name: 's.aps.quantity', label: '库存', readonly: true, value: "0" /}
      #{text_field id:'fnSku', name: 's.fnSku', label: 'FBA 的 FNSKU', value: s.fnSku /}

  </div>
  <div class="span12">
      #{input_append /}
  </div>
  <div class="span10">
    <div id="hardwarePlatformHome" style="display: none">
        #{text_field id:'hardwarePlatform1', name: 's.aps.hardwarePlatformss[0]', label: 'Hardware Platform 1~5', value: '' /}
          #{text_field id:'hardwarePlatform2', name: 's.aps.hardwarePlatformss[1]', label: '', value: '' /}
          #{text_field id:'hardwarePlatform3', name: 's.aps.hardwarePlatformss[2]', label: '', value: '' /}
          #{text_field id:'hardwarePlatform4', name: 's.aps.hardwarePlatformss[3]', label: '', value: '' /}
          #{text_field id:'hardwarePlatform5', name: 's.aps.hardwarePlatformss[4]', label: '', value: '' /}
    </div>

      #{text_field id:'bulletPoint1', name: 's.aps.keyFeturess[0]', label: 'BulletPoint 1~5',  value: s.aps.keyFeturess[0]/}
      #{text_field id:'bulletPoint2', name: 's.aps.keyFeturess[1]', label: '', value: s.aps.keyFeturess[1] /}
      #{text_field id:'bulletPoint3', name: 's.aps.keyFeturess[2]', label: '', value: s.aps.keyFeturess[2]/}
      #{text_field id:'bulletPoint4', name: 's.aps.keyFeturess[3]', label: '', value: s.aps.keyFeturess[3]/}
      #{text_field id:'bulletPoint5', name: 's.aps.keyFeturess[4]', label: '', value: s.aps.keyFeturess[4]/}

      #{text_field id:'searchTerms1', name: 's.aps.searchTermss[0]', label: 'SearchTerms 1~5', value: s.aps.searchTermss[0]/}
      #{text_field id:'searchTerms2', name: 's.aps.searchTermss[1]', label: '', value: s.aps.searchTermss[1]/}
      #{text_field id:'searchTerms3', name: 's.aps.searchTermss[2]', label: '', value: s.aps.searchTermss[2]/}
      #{text_field id:'searchTerms4', name: 's.aps.searchTermss[3]', label: '', value: s.aps.searchTermss[3]/}
      #{text_field id:'searchTerms5', name: 's.aps.searchTermss[4]', label: '', value: s.aps.searchTermss[4]/}

      #{textarea_field id:'productDesc', name: 's.aps.productDesc', rows: 10, label: '产品详细描述', value: s.aps.productDesc /}
  </div>
  <div class="offset1 span9" id="previewDesc"></div>
#{/form}
</div>
