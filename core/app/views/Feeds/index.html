#{extends 'main_full.html' /}
#{set title:'Feed' /}
#{set 'moreScripts'}
    #{script 'component/pagination.coffee'/}
#{/set}

<div id="prod_list">
#{if feeds.size() == 0}
    等待创建新的 Feed
#{/if}
#{else }
    <table class="table table-condensed table-bordered">
      <tr>
        <th>SKU</th>
        <th>Pics</th>
        <th>Name</th>
        <th>L</th>
        <th>H</th>
        <th>W</th>
        <th>Wt</th>
      </tr>
    #{list items:feeds, as:'feed'}
      <tr data-toggle="collapse" data-target="#prod_details_${prod.sku}">
        <td><a target="_blank" href="@{Products.show(prod.sku)}">${prod.sku}</a></td>
          #{set count:prod.pictureCount() /}
        <td>${count} <i class="${count > 0 ? 'icon-picture' : 'icon-exclamation-sign'}"></i>
        </td>
        <td>${prod.productName}</td>
        <td>${prod.lengths == null ? 0 : prod.lengths}</td>
        <td>${prod.heigh == null ? 0 : prod.heigh}</td>
        <td>${prod.width == null ? 0 : prod.width}</td>
        <td>${prod.weight == null ? 0 : prod.weight}</td>
      </tr>
    #{/list}
    #{if pi}
      <tr>
        <td colspan="7">
            #{bootstrap_pager pi:pi, url:'/products/index'/}
        </td>
      </tr>
    #{/if}
    </table>
#{/else}
</div>
