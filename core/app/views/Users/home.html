#{extends 'main.html'/}
#{set title:'Welcome Home [' + user.username.capFirst() + ']'/}

#{errorMsgs /}
#{flash_alert /}
#{info_row title:'用户信息'/}
<div class="row">
    <div class="span12">
        <form method="post" action="@{Users.updates()}">
            <table class="table table-bordered table-condensed">
                <tr>
                    <th>用户名</th>
                    <td>${user.username}</td>

                    <th>Email</th>
                    <td>${user.email}</td>
                </tr>

                <tr>
                    <th>手机</th>
                    <td><input type="text" name="user.phone" value="${user.phone}"></td>

                    <th>固定电话</th>
                    <td><input type="text" value="${user.tel}" name="user.tel"></td>
                </tr>

                <tr>
                    <th>QQ</th>
                    <td><input type="text" value="${user.qq}" name="user.qq"></td>

                    <th>阿里旺旺</th>
                    <td><input type="text" value="${user.wangwang}" name="user.wangwang"></td>
                </tr>
                <tr>
                    <th>密码</th>
                    <td><input type="password" name="user.password" placeHolder="更新需要填写正确的密码"></td>

                    <th>密码确认</th>
                    <td><input type="password" name="user.confirm"></td>
                </tr>
                <tr>
                    <th>新密码</th>
                    <td><input type="password" name="newPassword" placeHolder="填写需要修改的新密码或留空"></td>

                    <th>新密码确认</th>
                    <td><input type="password" name="newPasswordConfirm" placeHolder="如果不需要修改密码,留空"></td>
                </tr>
                <tr>
                    <td colspan="4">
                        <input type="hidden" value="${user.id}" name="user.id">
                        <button class="btn btn-primary">更新</button>
                    </td>
                </tr>
            </table>
        </form>
    </div>
</div>

#{info_row title:"Notifications (最新 80 条)"/}
<div class="row">
    <div class="span12">
        <table class="table table-bordered table-condensed">
            <tr>
                <th>#</th>
                <th>标题</th>
                <th>内容</th>
                <th>创建时间</th>
                <th>通知时间</th>
            </tr>
        #{list items:notifications, as:'note'}
            <tr>
                <td>${note.id}</td>
                <td>${note.title}</td>
                <td>${note.content}</td>
                <td>#{time_tooltip time:note.createAt, datetime:true/}</td>
                <td>#{time_tooltip time:note.notifyAt, datetime:true/}</td>
            </tr>
        #{/list}
        </table>
    </div>
</div>
