#{extends 'main_full.html'/}
#{set title:'Team' /}
#{set 'moreScripts'}
#{/set}
<div class="row-fluid">
#{if teams.size() == 0}
  <div>
    等待添加新TEAM
  </div>
  <div>
    <a href="@{Teams.blank()}" class="btn btn-primary">创建新 Team</a>
  </div>
#{/if}
#{else }
  <div class="row-fluid">
    <div class="span3 well well-small" id="team_slider">
      <table class="table table-bordered table-condensed">
        <tr>
          <th class="span1">TeamId</th>
          <th>Name</th>
        </tr>
          #{list items:teams, as:'team_left'}
            <tr>
              <td>${team_left.teamId}</td>
              <td>
                <a href="@{Teams.show()}/${team_left.id}">${team_left.name}</a>
              </td>
            </tr>
          #{/list}
      </table>
      <a href="@{Teams.blank()}" class="btn btn-primary">创建新 Team</a>

      <form action="@{Teams.delete()}" method="post" style="display:inline-block;">
        <input type="hidden" name="id" value="${team?.id}">
          #{authenticityToken /}
        <button data-confirm='确认删除?' class="btn btn-danger">删除 Team: ${team}</button>
      </form>
    </div>

    <div class="span8 well well-small" id="team_detail">
        #{flash_alert /}
        #{errorMsgs /}

        #{info_row title:'Basic Info'}
          <ul>
            <li>TEAM要求</li>
          </ul>
        #{/info_row}
      <div>
        <form action="@{Teams.update()}" method="post">
          <table class="table table-bordered table-condensed">
            <tr>
              <td>TeamId:</td>
              <td>${team.teamId}</td>
              <td>Name:</td>
              <td>
                <input class="input-medium" type="text" name="team.name" value="${team.name}">
              </td>
            </tr>
            <tr>
              <td>Memo:</td>
              <td colspan="3">
                <textarea name="team.memo" class="span12" rows="5">${team.memo}</textarea>
              </td>
            </tr>
            <tr>
              <td colspan="4">
                <input type="hidden" name="team.id" value="${team.id}">
                <button class="btn btn-primary" data-loading>保存</button>
              </td>
            </tr>
          </table>
        </form>
      </div>


      #{info_row title:'Relate Info'/}
       <div class="row-fluid">
         <div class="span6">
             <div style="margin-bottom:10px;">
               <button class="btn btn-warning">产品类别</button>
             </div>
             <table class="table table-bordered table-condensed">
               <tr>
                 <th>CategoryId</th>
                 <th>Name</th>
               </tr>
                 #{list items:team.getCategorys(), as:'cat'}
                   <tr>
                     <td>${cat.categoryId}</td>
                     <td>${cat.name}</td>
                   </tr>
                 #{/list}
             </table>
         </div>


         <div class="span6">
             <div style="margin-bottom:10px;">
               <button class="btn btn-warning">用户</button>
             </div>
             <table class="table table-bordered table-condensed">
               <tr>
                 <th>username</th>
                 <th>email</th>
               </tr>
                 #{list items:team.users, as:'usr'}
                   <tr>
                     <td>${usr.username}</td>
                     <td>${usr.email}</td>
                   </tr>
                 #{/list}
             </table>
         </div>
       </div>


    </div>










  </div>
</div>
#{/else}
</div>