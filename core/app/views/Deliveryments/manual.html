#{extends 'main.html' /}
#{set title:'新增手动单' /}
#{set 'moreScripts'}
    #{script 'deliveryments/manual.coffee'/}
#{/set}
#{errorMsgs /}
#{flash_alert/}

#{form @Deliveryments.createManual(), method: 'POST',id: 'new_procureunit'}
<h4>手动添加采购单</h4>

#{set copers:unit.product?.cooperators() /}

<table class="table table-condensed table-bordered">
  <tr>
    <th>采购单别名</th>
    <td>
      <input type="text" name="dmt.name" value="${name}">
    </td>

    <th>SKU</th>
    <td>
        #{text_input id: "unit_sku", name: "unit.product.sku", value: unit.product?.sku,
          readonly: unit.product?.sku?true:'', datasource: "${skus}" /}
    </td>
  </tr>

  <tr>
    <th>供应商</th>
    <td>
      #{select 'dmt.cooperator.id', items: copers, labelProperty: 'name', value: dmt.cooperator?.id}
        #{option ''}请选择#{/option}
      #{/select}
      <input type="hidden" name="dmt.id" value="${dmt.id}">
    </td>

    <th>价格</th>
    <td>
      <div class="input-append">
        <input type="text" class="span1" id="unit_price" name="unit.attrs.price" value="${unit.attrs.price}">
          #{pickCurrency id:'unit_currency', name:'unit.attrs.currency', class:'span2', c:unit.attrs.currency?:helper.Currency.CNY /}
      </div>
    </td>
  </tr>

  <tr>
    <th>采购数量</th>
    <td>
      <div class="input-append">
        <input type="text" class="input-mini" placeHolder="具体数量" name="unit.attrs.planQty" value="${unit.attrs.planQty}">
        <input type="text" id="box_num" class="input-mini" placeHolder="箱数">
        <span class="add-on">箱</span>
      </div>
      <input type="hidden" name="unit.attrs.qty" value="${unit.attrs.qty}">
    </td>

    <th>预计交货日期</th>
    <td colspan="4">
      <input type="date" name="unit.attrs.planDeliveryDate" value="${unit.attrs.planDeliveryDate.date()}">
      <input type="hidden" name="unit.attrs.deliveryDate" value="${unit.attrs.deliveryDate.date()}">
    </td>
  </tr>

  <tr>
    <td colspan="4">
      <button class="btn btn-primary">保存</button>
    </td>
  </tr>
</table>
#{/form}
